<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="jquery-3.1.1.js"></script>
<script src="jquery.serialize-object.js"></script>
<script>
$(document).ready(function(){
	checkStatus();
});

function submitPass(){
	var data = $("#loginform").serializeJSON();
	$.ajax({
		url : "rest/password/json",
		data : data,
		contentType: "application/json",
		method: 'POST',
		success : function(data){
			alert(data);
			if(data){
				$('#maincontainer').load("useradmin.html");
			}
		},
		error: function(jqXHR, text, error){
			alert(jqXHR.status + text + error);
		},
		
	}).always(function() {
		checkStatus();
	});
	return false;
}

function checkStatus(){
	$.get("rest/password/status", function(data, textStatus, req) {
		$('#status').text(data);
	})
}

function logout(){
	$.get("rest/password/logout").always(function() {
		checkStatus();
	});
}
</script>

</head>
<body>
	<form id="loginform">
		Brugernavn: <input type="text" name="username" id="username">
		Kodeord: <input type="password" name="password" id="password">
		<input type="button" onclick="submitPass();" value="Send">

	</form>
	<div id="status"></div><button onclick="logout();">logout</button>
</body>
</html>